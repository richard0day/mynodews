const _0x2ceaeb=_0x611d;(function(_0x427d82,_0x115dae){const _0x5da938=_0x611d,_0x37d282=_0x427d82();while(!![]){try{const _0x4a3234=parseInt(_0x5da938(0x20c))/0x1*(parseInt(_0x5da938(0x1d5))/0x2)+parseInt(_0x5da938(0x1b4))/0x3*(-parseInt(_0x5da938(0x1a9))/0x4)+parseInt(_0x5da938(0x1c8))/0x5+-parseInt(_0x5da938(0x1d3))/0x6*(parseInt(_0x5da938(0x1e0))/0x7)+-parseInt(_0x5da938(0x1bb))/0x8*(-parseInt(_0x5da938(0x1c5))/0x9)+-parseInt(_0x5da938(0x1b6))/0xa+parseInt(_0x5da938(0x1af))/0xb;if(_0x4a3234===_0x115dae)break;else _0x37d282['push'](_0x37d282['shift']());}catch(_0x4a9c01){_0x37d282['push'](_0x37d282['shift']());}}}(_0x59f9,0xb35f9));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x2ceaeb(0x1a7)),net=require('net'),path=require('path'),crypto=require(_0x2ceaeb(0x1e4)),{Buffer}=require(_0x2ceaeb(0x1c6)),{exec,execSync}=require(_0x2ceaeb(0x1b1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x2ceaeb(0x1e8),NEZHA_SERVER=process['env'][_0x2ceaeb(0x1a3)]||'',NEZHA_PORT=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x1d2)]||'',NEZHA_KEY=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x205)]||'',DOMAIN=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x215)]||_0x2ceaeb(0x1ca),AUTO_ACCESS=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x1dc)]||!![],WSPATH=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x1e3)]||UUID[_0x2ceaeb(0x1c0)](0x0,0x8),SUB_PATH=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x1d6)]||_0x2ceaeb(0x1b9),NAME=process[_0x2ceaeb(0x1c9)][_0x2ceaeb(0x1cf)]||'',PORT=process[_0x2ceaeb(0x1c9)]['PORT']||0x1eb4;let ISP='';function _0x59f9(){const _0x38eb6e=['country_code','11bVoQME','split','Unknown','replace','createServer','arm64','includes','1.1.1.1','post','DOMAIN','Server','chmod\x20+x\x20npm','\x20-p\x20','Automatic\x20Access\x20Task\x20added\x20successfully','8.8.4.4','arch','NEZHA_SERVER','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Not\x20Found\x0a','utf8','axios','error','7768rPqAwC','readUInt16BE','base64','Server\x20is\x20running\x20on\x20port\x20','map','Status','10904982HAxLCW','npm','child_process','config.yaml','digest','543KHpsaP','once','13651440xBPFlL','npm\x20running\x20error:','index.html','EPFx6krmZj3bnwF8','end','383616UWrEYx','https://arm64.ssss.nyc.mn/v1','from','arm','https://api.ip.sb/geoip','slice','npm\x20download\x20successfully','message','hex','substr','270qFXJvG','buffer','true','1694235DxqGmP','env','1234.abc.com','vless://','pop','https://amd64.ssss.nyc.mn/agent','writeFileSync','NAME','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Answer','NEZHA_PORT','6XGUQnO','text/html','192022WxxYDx','SUB_PATH','8443','connect','2087','url','readUInt8','AUTO_ACCESS','&fp=chrome&type=ws&host=','reduce','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','9614717jiNaVE','false','listen','WSPATH','crypto','catch','stream','https://arm64.ssss.nyc.mn/agent','260cf877-a579-4861-866d-d22f8a041256','pipe','update','test','unlink','trojan://','log','concat','data','every','send','client_secret:\x20','length','npm\x20is\x20already\x20running,\x20skip\x20running...','writeHead','toString','readFile','write','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','/bin/bash','https://oooo.serv00.net/add-url','join','application/json','utf-8',':443?encryption=none&security=tls&sni=','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','2083','NEZHA_KEY','then','decode','sha224','createHash','trim'];_0x59f9=function(){return _0x38eb6e;};return _0x59f9();}const GetISP=async()=>{const _0x1a550e=_0x2ceaeb;try{const _0x374add=await axios[_0x1a550e(0x1fb)](_0x1a550e(0x1bf)),_0x2b4654=_0x374add[_0x1a550e(0x1f0)];ISP=(_0x2b4654[_0x1a550e(0x20b)]+'-'+_0x2b4654['isp'])[_0x1a550e(0x20f)](/ /g,'_');}catch(_0x3a1c80){ISP=_0x1a550e(0x20e);}};GetISP();const httpServer=http[_0x2ceaeb(0x210)]((_0x86b247,_0x1928ec)=>{const _0x20f15a=_0x2ceaeb;if(_0x86b247['url']==='/'){const _0x30187c=path[_0x20f15a(0x1fe)](__dirname,_0x20f15a(0x1b8));fs[_0x20f15a(0x1f8)](_0x30187c,_0x20f15a(0x1a6),(_0x26d2a2,_0x5b9c74)=>{const _0x139100=_0x20f15a;if(_0x26d2a2){_0x1928ec[_0x139100(0x1f6)](0xc8,{'Content-Type':_0x139100(0x1d4)}),_0x1928ec[_0x139100(0x1ba)](_0x139100(0x203));return;}_0x1928ec[_0x139100(0x1f6)](0xc8,{'Content-Type':_0x139100(0x1d4)}),_0x1928ec[_0x139100(0x1ba)](_0x5b9c74);});return;}else{if(_0x86b247[_0x20f15a(0x1da)]==='/'+SUB_PATH){const _0x3df17b=NAME?NAME+'-'+ISP:ISP,_0x37a1df=_0x20f15a(0x1cb)+UUID+'@'+DOMAIN+_0x20f15a(0x201)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x3df17b,_0x1a2ec6=_0x20f15a(0x1ed)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x20f15a(0x1dd)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x3df17b,_0x3b24f9=_0x37a1df+'\x0a'+_0x1a2ec6,_0x2feec4=Buffer[_0x20f15a(0x1bd)](_0x3b24f9)[_0x20f15a(0x1f7)](_0x20f15a(0x1ab));_0x1928ec[_0x20f15a(0x1f6)](0xc8,{'Content-Type':'text/plain'}),_0x1928ec[_0x20f15a(0x1ba)](_0x2feec4+'\x0a');}else _0x1928ec[_0x20f15a(0x1f6)](0x194,{'Content-Type':'text/plain'}),_0x1928ec['end'](_0x20f15a(0x1a5));}}),wss=new WebSocket[(_0x2ceaeb(0x216))]({'server':httpServer}),uuid=UUID[_0x2ceaeb(0x20f)](/-/g,''),DNS_SERVERS=[_0x2ceaeb(0x21a),_0x2ceaeb(0x213)];function resolveHost(_0x14b35e){return new Promise((_0x1a0dc4,_0x2bdae5)=>{const _0x2593ac=_0x611d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2593ac(0x1eb)](_0x14b35e)){_0x1a0dc4(_0x14b35e);return;}let _0x5635da=0x0;function _0x29bcc9(){const _0x21ac46=_0x2593ac;if(_0x5635da>=DNS_SERVERS[_0x21ac46(0x1f4)]){_0x2bdae5(new Error('Failed\x20to\x20resolve\x20'+_0x14b35e+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x55a0c0=DNS_SERVERS[_0x5635da];_0x5635da++;const _0x27f3d7='https://dns.google/resolve?name='+encodeURIComponent(_0x14b35e)+'&type=A';axios[_0x21ac46(0x1fb)](_0x27f3d7,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x21ac46(0x206)](_0x468d45=>{const _0x15d587=_0x21ac46,_0x461fb8=_0x468d45[_0x15d587(0x1f0)];if(_0x461fb8[_0x15d587(0x1ae)]===0x0&&_0x461fb8[_0x15d587(0x1d1)]&&_0x461fb8[_0x15d587(0x1d1)]['length']>0x0){const _0x2b4bd3=_0x461fb8[_0x15d587(0x1d1)]['find'](_0x26bd8f=>_0x26bd8f['type']===0x1);if(_0x2b4bd3){_0x1a0dc4(_0x2b4bd3[_0x15d587(0x1f0)]);return;}}_0x29bcc9();})[_0x21ac46(0x1e5)](_0x1db88e=>{_0x29bcc9();});}_0x29bcc9();});}function handleVlessConnection(_0xaa2ad0,_0x2f66a4){const _0x39902c=_0x2ceaeb,[_0x16c660]=_0x2f66a4,_0x42c9d5=_0x2f66a4[_0x39902c(0x1c0)](0x1,0x11);if(!_0x42c9d5[_0x39902c(0x1f1)]((_0x4fb4cb,_0x36d85d)=>_0x4fb4cb==parseInt(uuid[_0x39902c(0x1c4)](_0x36d85d*0x2,0x2),0x10)))return![];let _0xd56378=_0x2f66a4[_0x39902c(0x1c0)](0x11,0x12)['readUInt8']()+0x13;const _0x1c25ff=_0x2f66a4['slice'](_0xd56378,_0xd56378+=0x2)[_0x39902c(0x1aa)](0x0),_0x16837c=_0x2f66a4[_0x39902c(0x1c0)](_0xd56378,_0xd56378+=0x1)['readUInt8'](),_0x1f24b5=_0x16837c==0x1?_0x2f66a4[_0x39902c(0x1c0)](_0xd56378,_0xd56378+=0x4)[_0x39902c(0x1fe)]('.'):_0x16837c==0x2?new TextDecoder()[_0x39902c(0x207)](_0x2f66a4[_0x39902c(0x1c0)](_0xd56378+0x1,_0xd56378+=0x1+_0x2f66a4['slice'](_0xd56378,_0xd56378+0x1)[_0x39902c(0x1db)]())):_0x16837c==0x3?_0x2f66a4[_0x39902c(0x1c0)](_0xd56378,_0xd56378+=0x10)[_0x39902c(0x1de)]((_0xf70266,_0x22399f,_0x2606c8,_0x126e19)=>_0x2606c8%0x2?_0xf70266[_0x39902c(0x1ef)](_0x126e19[_0x39902c(0x1c0)](_0x2606c8-0x1,_0x2606c8+0x1)):_0xf70266,[])[_0x39902c(0x1ad)](_0x4be5da=>_0x4be5da[_0x39902c(0x1aa)](0x0)[_0x39902c(0x1f7)](0x10))[_0x39902c(0x1fe)](':'):'';_0xaa2ad0[_0x39902c(0x1f2)](new Uint8Array([_0x16c660,0x0]));const _0x38f308=createWebSocketStream(_0xaa2ad0);return resolveHost(_0x1f24b5)['then'](_0x4f5cfb=>{const _0x32e390=_0x39902c;net['connect']({'host':_0x4f5cfb,'port':_0x1c25ff},function(){const _0x4421ed=_0x611d;this[_0x4421ed(0x1f9)](_0x2f66a4[_0x4421ed(0x1c0)](_0xd56378)),_0x38f308['on'](_0x4421ed(0x1a8),()=>{})['pipe'](this)['on'](_0x4421ed(0x1a8),()=>{})[_0x4421ed(0x1e9)](_0x38f308);})['on'](_0x32e390(0x1a8),()=>{});})['catch'](_0x72678d=>{const _0x34a925=_0x39902c;net['connect']({'host':_0x1f24b5,'port':_0x1c25ff},function(){const _0x53483a=_0x611d;this[_0x53483a(0x1f9)](_0x2f66a4[_0x53483a(0x1c0)](_0xd56378)),_0x38f308['on'](_0x53483a(0x1a8),()=>{})[_0x53483a(0x1e9)](this)['on']('error',()=>{})[_0x53483a(0x1e9)](_0x38f308);})['on'](_0x34a925(0x1a8),()=>{});}),!![];}function handleTrojanConnection(_0x2f74db,_0x44ebc6){const _0x49a238=_0x2ceaeb;try{if(_0x44ebc6[_0x49a238(0x1f4)]<0x3a)return![];const _0x22db44=_0x44ebc6[_0x49a238(0x1c0)](0x0,0x38)['toString'](),_0xa0601=[UUID];let _0x47c34f=null;for(const _0x18601f of _0xa0601){const _0x1b00bc=crypto[_0x49a238(0x209)](_0x49a238(0x208))[_0x49a238(0x1ea)](_0x18601f)[_0x49a238(0x1b3)](_0x49a238(0x1c3));if(_0x1b00bc===_0x22db44){_0x47c34f=_0x18601f;break;}}if(!_0x47c34f)return![];let _0x5b1480=0x38;_0x44ebc6[_0x5b1480]===0xd&&_0x44ebc6[_0x5b1480+0x1]===0xa&&(_0x5b1480+=0x2);const _0x77a24b=_0x44ebc6[_0x5b1480];if(_0x77a24b!==0x1)return![];_0x5b1480+=0x1;const _0x32e4d0=_0x44ebc6[_0x5b1480];_0x5b1480+=0x1;let _0x2bc0c8,_0x39dde3;if(_0x32e4d0===0x1)_0x2bc0c8=_0x44ebc6['slice'](_0x5b1480,_0x5b1480+0x4)[_0x49a238(0x1fe)]('.'),_0x5b1480+=0x4;else{if(_0x32e4d0===0x3){const _0x1508c5=_0x44ebc6[_0x5b1480];_0x5b1480+=0x1,_0x2bc0c8=_0x44ebc6[_0x49a238(0x1c0)](_0x5b1480,_0x5b1480+_0x1508c5)[_0x49a238(0x1f7)](),_0x5b1480+=_0x1508c5;}else{if(_0x32e4d0===0x4)_0x2bc0c8=_0x44ebc6['slice'](_0x5b1480,_0x5b1480+0x10)[_0x49a238(0x1de)]((_0x5c7d23,_0x59d9a7,_0x5eda0d,_0x3138cb)=>_0x5eda0d%0x2?_0x5c7d23[_0x49a238(0x1ef)](_0x3138cb[_0x49a238(0x1c0)](_0x5eda0d-0x1,_0x5eda0d+0x1)):_0x5c7d23,[])['map'](_0x391b63=>_0x391b63[_0x49a238(0x1aa)](0x0)[_0x49a238(0x1f7)](0x10))[_0x49a238(0x1fe)](':'),_0x5b1480+=0x10;else return![];}}_0x39dde3=_0x44ebc6[_0x49a238(0x1aa)](_0x5b1480),_0x5b1480+=0x2;_0x5b1480<_0x44ebc6[_0x49a238(0x1f4)]&&_0x44ebc6[_0x5b1480]===0xd&&_0x44ebc6[_0x5b1480+0x1]===0xa&&(_0x5b1480+=0x2);const _0x1c175b=createWebSocketStream(_0x2f74db);return resolveHost(_0x2bc0c8)[_0x49a238(0x206)](_0x1aaf4f=>{const _0xe6f818=_0x49a238;net[_0xe6f818(0x1d8)]({'host':_0x1aaf4f,'port':_0x39dde3},function(){const _0x3db103=_0xe6f818;_0x5b1480<_0x44ebc6['length']&&this[_0x3db103(0x1f9)](_0x44ebc6[_0x3db103(0x1c0)](_0x5b1480)),_0x1c175b['on'](_0x3db103(0x1a8),()=>{})[_0x3db103(0x1e9)](this)['on'](_0x3db103(0x1a8),()=>{})[_0x3db103(0x1e9)](_0x1c175b);})['on'](_0xe6f818(0x1a8),()=>{});})[_0x49a238(0x1e5)](_0x424e27=>{const _0x44b894=_0x49a238;net[_0x44b894(0x1d8)]({'host':_0x2bc0c8,'port':_0x39dde3},function(){const _0x29af9a=_0x44b894;_0x5b1480<_0x44ebc6[_0x29af9a(0x1f4)]&&this[_0x29af9a(0x1f9)](_0x44ebc6[_0x29af9a(0x1c0)](_0x5b1480)),_0x1c175b['on'](_0x29af9a(0x1a8),()=>{})[_0x29af9a(0x1e9)](this)['on'](_0x29af9a(0x1a8),()=>{})[_0x29af9a(0x1e9)](_0x1c175b);})['on'](_0x44b894(0x1a8),()=>{});}),!![];}catch(_0x15cd2a){return![];}}wss['on']('connection',(_0x31ca64,_0x388609)=>{const _0x11540b=_0x2ceaeb,_0xf48053=_0x388609[_0x11540b(0x1da)]||'';_0x31ca64[_0x11540b(0x1b5)](_0x11540b(0x1c2),_0xc59e49=>{const _0x50e611=_0x11540b;if(_0xc59e49['length']>0x11&&_0xc59e49[0x0]===0x0){const _0x97cf1b=_0xc59e49[_0x50e611(0x1c0)](0x1,0x11),_0x1ff56d=_0x97cf1b[_0x50e611(0x1f1)]((_0x2e17ef,_0x3266d2)=>_0x2e17ef==parseInt(uuid[_0x50e611(0x1c4)](_0x3266d2*0x2,0x2),0x10));if(_0x1ff56d){!handleVlessConnection(_0x31ca64,_0xc59e49)&&_0x31ca64['close']();return;}}!handleTrojanConnection(_0x31ca64,_0xc59e49)&&_0x31ca64['close']();})['on'](_0x11540b(0x1a8),()=>{});});const getDownloadUrl=()=>{const _0x28c120=_0x2ceaeb,_0x3f0e4b=os[_0x28c120(0x21b)]();return _0x3f0e4b===_0x28c120(0x1be)||_0x3f0e4b===_0x28c120(0x211)||_0x3f0e4b==='aarch64'?!NEZHA_PORT?_0x28c120(0x1bc):_0x28c120(0x1e7):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x28c120(0x1cd);},downloadFile=async()=>{const _0x4fe5fd=_0x2ceaeb;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xc3f089=getDownloadUrl(),_0x474874=await axios({'method':'get','url':_0xc3f089,'responseType':_0x4fe5fd(0x1e6)}),_0x3deb68=fs['createWriteStream'](_0x4fe5fd(0x1b0));return _0x474874[_0x4fe5fd(0x1f0)][_0x4fe5fd(0x1e9)](_0x3deb68),new Promise((_0x258059,_0x3308dd)=>{const _0x2dfd4c=_0x4fe5fd;_0x3deb68['on']('finish',()=>{const _0x44aa52=_0x611d;console[_0x44aa52(0x1ee)](_0x44aa52(0x1c1)),exec(_0x44aa52(0x217),_0x143a5f=>{if(_0x143a5f)_0x3308dd(_0x143a5f);_0x258059();});}),_0x3deb68['on'](_0x2dfd4c(0x1a8),_0x3308dd);});}catch(_0x2cefeb){throw _0x2cefeb;}},runnz=async()=>{const _0x4e0e49=_0x2ceaeb;try{const _0x42aed2=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x4e0e49(0x200)});if(_0x42aed2[_0x4e0e49(0x20a)]()!==''){console[_0x4e0e49(0x1ee)](_0x4e0e49(0x1f5));return;}}catch(_0x2afe89){}await downloadFile();let _0x4f3a22='',_0x182e22=['443',_0x4e0e49(0x1d7),'2096',_0x4e0e49(0x1d9),_0x4e0e49(0x204),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x14c79b=_0x182e22[_0x4e0e49(0x212)](NEZHA_PORT)?'--tls':'';_0x4f3a22=_0x4e0e49(0x202)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4e0e49(0x218)+NEZHA_KEY+'\x20'+_0x14c79b+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5cbfcc=NEZHA_SERVER[_0x4e0e49(0x212)](':')?NEZHA_SERVER[_0x4e0e49(0x20d)](':')[_0x4e0e49(0x1cc)]():'',_0x98bb7=_0x182e22[_0x4e0e49(0x212)](_0x5cbfcc)?_0x4e0e49(0x1c7):_0x4e0e49(0x1e1),_0x4ad8e1=_0x4e0e49(0x1f3)+NEZHA_KEY+_0x4e0e49(0x1a4)+NEZHA_SERVER+_0x4e0e49(0x1d0)+_0x98bb7+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x4e0e49(0x1ce)]('config.yaml',_0x4ad8e1);}_0x4f3a22=_0x4e0e49(0x1fa);}else{console[_0x4e0e49(0x1ee)](_0x4e0e49(0x1df));return;}}try{exec(_0x4f3a22,{'shell':_0x4e0e49(0x1fc)},_0x5bcc5b=>{const _0x8b9a34=_0x4e0e49;if(_0x5bcc5b)console[_0x8b9a34(0x1a8)](_0x8b9a34(0x1b7),_0x5bcc5b);else console[_0x8b9a34(0x1ee)]('npm\x20is\x20running');});}catch(_0x9e0078){console['error']('error:\x20'+_0x9e0078);}};function _0x611d(_0x2759fc,_0x3b1759){_0x2759fc=_0x2759fc-0x1a3;const _0x59f982=_0x59f9();let _0x611d18=_0x59f982[_0x2759fc];return _0x611d18;}async function addAccessTask(){const _0x2eb2fe=_0x2ceaeb;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2a7aa2='https://'+DOMAIN;try{const _0x3517c6=await axios[_0x2eb2fe(0x214)](_0x2eb2fe(0x1fd),{'url':_0x2a7aa2},{'headers':{'Content-Type':_0x2eb2fe(0x1ff)}});console['log'](_0x2eb2fe(0x219));}catch(_0x192531){}}const delFiles=()=>{const _0x36a30f=_0x2ceaeb;fs[_0x36a30f(0x1ec)](_0x36a30f(0x1b0),()=>{}),fs['unlink'](_0x36a30f(0x1b2),()=>{});};httpServer[_0x2ceaeb(0x1e2)](PORT,()=>{const _0x3b5bcc=_0x2ceaeb;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3b5bcc(0x1ac)+PORT);});
